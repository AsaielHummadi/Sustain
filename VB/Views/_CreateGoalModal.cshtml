@model Sustain.ViewModels.GoalVMs.GoalIndexViewModel

<!-- Create Goal Modal -->
<div class="modal fade" id="createGoalModal" tabindex="-1" aria-labelledby="createGoalModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content shadow-lg border-0 rounded-4">
            <div class="modal-header bg-primary text-white border-0 rounded-top-4 p-4">
                <h3 class="modal-title fw-bolder" id="createGoalModalLabel">
                    <i class="bi bi-plus-circle-fill me-2 fs-4"></i>Create New Goal
                </h3>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="POST" asp-action="Store">
                @Html.AntiForgeryToken()
                <div class="modal-body p-5">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="GoalTitle" class="form-label fw-bold text-secondary">
                                <i class="bi bi-pencil-square me-2 text-success"></i>Goal Title *
                            </label>
                            <input type="text" class="form-control @(ViewData.ModelState["GoalTitle"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                   id="GoalTitle" name="GoalTitle"
                                   value="@ViewData["GoalTitle"]"
                                   placeholder="e.g., Reduce Carbon Emissions by 20%" required>
                            @if (ViewData.ModelState["GoalTitle"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["GoalTitle"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="EmissionSourceId" class="form-label fw-bold text-secondary">
                                <i class="bi bi-cloud me-2 text-success"></i>Emission Source *
                            </label>
                            <select class="form-select @(ViewData.ModelState["EmissionSourceId"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                    id="EmissionSourceId" name="EmissionSourceId" required>
                                <option value="">Select Emission Source</option>
                                @foreach (var source in Model.EmissionSources)
                                {
                                    <option value="@source.EmissionSourceId"
                                            selected="@(ViewData["EmissionSourceId"]?.ToString() == source.EmissionSourceId.ToString())">
                                        @source.EmissionSourceName (@source.EmissionSourceUnit)
                                    </option>
                                }
                            </select>
                            @if (ViewData.ModelState["EmissionSourceId"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["EmissionSourceId"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="GoalDescription" class="form-label fw-bold text-secondary">
                            <i class="bi bi-text-paragraph me-2 text-success"></i>Description
                        </label>
                        <textarea class="form-control @(ViewData.ModelState["GoalDescription"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                  id="GoalDescription" name="GoalDescription"
                                  rows="3" placeholder="Describe your goal and objectives...">@ViewData["GoalDescription"]</textarea>
                        @if (ViewData.ModelState["GoalDescription"]?.Errors.Count > 0)
                        {
                            <div class="invalid-feedback">@ViewData.ModelState["GoalDescription"].Errors[0].ErrorMessage</div>
                        }
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="GoalGoalValue" class="form-label fw-bold text-secondary">
                                <i class="bi bi-bullseye me-2 text-success"></i>Target Value *
                            </label>
                            <input type="number" step="0.01" class="form-control @(ViewData.ModelState["GoalGoalValue"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                   id="GoalGoalValue" name="GoalGoalValue"
                                   value="@ViewData["GoalGoalValue"]"
                                   placeholder="0.00" required>
                            @if (ViewData.ModelState["GoalGoalValue"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["GoalGoalValue"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="GoalGoalPeriod" class="form-label fw-bold text-secondary">
                                <i class="bi bi-calendar-range me-2 text-success"></i>Goal Period *
                            </label>
                            <select class="form-select @(ViewData.ModelState["GoalGoalPeriod"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                    id="GoalGoalPeriod" name="GoalGoalPeriod" required>
                                <option value="">Select Period</option>
                                <option value="Monthly" selected="@(ViewData["GoalGoalPeriod"]?.ToString() == "Monthly")">Monthly</option>
                                <option value="Quarterly" selected="@(ViewData["GoalGoalPeriod"]?.ToString() == "Quarterly")">Quarterly</option>
                                <option value="Annual" selected="@(ViewData["GoalGoalPeriod"]?.ToString() == "Annual")">Annual</option>
                                <option value="Custom" selected="@(ViewData["GoalGoalPeriod"]?.ToString() == "Custom")">Custom</option>
                            </select>
                            @if (ViewData.ModelState["GoalGoalPeriod"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["GoalGoalPeriod"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="GoalGoalStartDate" class="form-label fw-bold text-secondary">
                                <i class="bi bi-calendar-plus me-2 text-success"></i>Start Date *
                            </label>
                            <input type="date" class="form-control @(ViewData.ModelState["GoalGoalStartDate"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                   id="GoalGoalStartDate" name="GoalGoalStartDate"
                                   value="@ViewData["GoalGoalStartDate"]" required>
                            @if (ViewData.ModelState["GoalGoalStartDate"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["GoalGoalStartDate"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="GoalGoalEndDate" class="form-label fw-bold text-secondary">
                                <i class="bi bi-calendar-check me-2 text-success"></i>End Date *
                            </label>
                            <input type="date" class="form-control @(ViewData.ModelState["GoalGoalEndDate"]?.Errors.Count > 0 ? "is-invalid" : "")"
                                   id="GoalGoalEndDate" name="GoalGoalEndDate"
                                   value="@ViewData["GoalGoalEndDate"]" required>
                            @if (ViewData.ModelState["GoalGoalEndDate"]?.Errors.Count > 0)
                            {
                                <div class="invalid-feedback">@ViewData.ModelState["GoalGoalEndDate"].Errors[0].ErrorMessage</div>
                            }
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-between p-4 border-top-0">
                    <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle me-1"></i>Cancel
                    </button>
                    <button type="submit" class="btn btn-primary btn-lg px-5 shadow-sm">
                        <i class="bi bi-check-circle me-2"></i>Create Goal
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>